<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Admin Dashboard â€“ Cuambe English School</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { font-family: 'Inter', sans-serif; }
  .card-shadow { box-shadow: 0 6px 18px rgba(2,6,23,0.12); }
  .status-active { color: green; font-weight: bold; }
  .status-inactive { color: orange; font-weight: bold; }
  .status-blocked { color: red; font-weight: bold; }
</style>
</head>
<body class="min-h-screen bg-gradient-to-r from-red-500 via-yellow-400 via-green-400 via-blue-500 via-indigo-500 via-purple-600 to-pink-500">

<!-- Top bar (visible on small screens) -->
<header class="md:hidden bg-blue-900 text-white flex items-center justify-between px-4 py-3">
  <div class="flex items-center gap-3">
    <button id="mobileMenuBtn" aria-label="Open menu" class="p-2 bg-blue-800/60 rounded-lg">â˜°</button>
    <h1 class="text-lg font-bold">Admin Dashboard</h1>
  </div>
  <div class="flex items-center gap-2">
    <button id="mobileManageUsersBtn" class="px-3 py-1 rounded-md bg-purple-600 text-white text-sm">Manage Users</button>
  </div>
</header>

<div class="min-h-screen md:flex">

  <!-- Sidebar -->
  <aside id="sidebar" class="fixed md:relative z-40 left-0 top-0 md:top-auto md:left-auto w-full md:w-72 transform md:translate-x-0 transition-transform duration-200 bg-gradient-to-b from-blue-900 to-blue-700 text-white p-4 md:h-auto">
    <div class="flex items-center justify-between md:block">
      <div class="flex items-center gap-2">
        <img src="../images/logo.png" alt="Cuambe Logo" class="h-10 w-10">
        <h1 class="text-2xl font-bold md:mb-6">Admin Dashboard</h1>
      </div>
      <button id="mobileCloseBtn" class="md:hidden p-2 bg-blue-800/60 rounded-lg">âœ•</button>
    </div>

    <nav class="mt-3 md:mt-6 space-y-3">
      <button onclick="showSection('welcome')" class="w-full text-left px-4 py-3 rounded-xl bg-blue-800 hover:bg-blue-600 font-semibold flex items-center gap-2 justify-between">
        <span>ğŸ  Welcome</span>
      </button>

      <button onclick="showSection('manageUsers')" class="w-full text-left px-4 py-3 rounded-xl bg-blue-800 hover:bg-blue-600 font-semibold flex items-center gap-2 justify-between">
        <span>ğŸ‘¨â€ğŸ“ Manage Users</span>
      </button>

      <!-- Open Dashboards -->
      <button onclick="goTeacherDashboard()" class="w-full px-4 py-3 rounded-xl bg-green-600 hover:bg-green-500 font-semibold flex items-center gap-2 justify-center">
        ğŸ‘©â€ğŸ« Open Teachers Dashboard
      </button>

      <button onclick="goStudentLevelsPage()" class="w-full px-4 py-3 rounded-xl bg-purple-600 hover:bg-purple-500 font-semibold flex items-center gap-2 justify-center">
        ğŸ‘¨â€ğŸ“ Open Students Dashboard
      </button>

      <div class="mt-6">
        <button onclick="logout()" class="w-full px-4 py-3 rounded-xl bg-red-600 hover:bg-red-700 font-bold flex items-center gap-2 justify-center">
          ğŸšª Logout
        </button>
      </div>
    </nav>
  </aside>

  <div id="overlay" class="hidden fixed inset-0 bg-black/30 z-30 md:hidden"></div>

  <main class="md:ml-72 p-4 md:p-8 space-y-6">

    <!-- Welcome Section -->
    <section id="welcome" class="space-y-4">
      <h2 class="text-2xl md:text-3xl font-bold text-white">ğŸŒŸ Welcome, Administrator!</h2>
      <div class="bg-white/95 p-6 md:p-8 rounded-2xl card-shadow text-gray-800 space-y-4 md:space-y-6 max-w-4xl mx-auto text-justify leading-relaxed">
        <p class="text-sm md:text-base">
          Welcome to the <strong>Cuambe English School Administration Panel</strong>, where leadership meets purpose and organization inspires growth. This is your control center to empower teachers, support students, and strengthen our entire learning community.
        </p>
        <p class="text-sm md:text-base">
          Every decision you make here contributes to a brighter academic journey. By managing teachers, guiding students, and maintaining excellence, you are not just leading, you are shaping the foundation of success for every learner at Cuambe English School.
        </p>
        <p class="text-sm md:text-base">
          As the administrator, you hold the torch that lights the path of progress. Your insight ensures that the school remains a place where teaching thrives and every student discovers their voice, confidence, and love for English.
        </p>
        <p class="italic text-gray-700 border-l-4 border-blue-600 pl-4 text-sm md:text-base">
          ğŸ’¡ <strong>Tip:</strong> Lead with heart and vision. When you guide a teacher, update a record, or support a student, remember, youâ€™re building a legacy of learning that lasts far beyond the classroom.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mt-2">
          <div class="p-4 rounded-2xl text-white bg-gradient-to-br from-yellow-400 to-orange-500">
            <h3 class="text-md md:text-xl font-bold mb-1">ğŸ† Admin of the Month</h3>
            <p class="font-semibold text-sm md:text-lg">Felisberto Raimundo Cuambe</p>
            <p class="text-xs md:text-sm opacity-90 mt-2">Recognized for outstanding leadership, dedication, and commitment to excellence at Cuambe English School.</p>
          </div>
          <div class="p-4 rounded-2xl text-white bg-gradient-to-br from-blue-600 to-indigo-700">
            <h3 class="text-md md:text-xl font-bold mb-1">ğŸ’¬ Motivational Quote</h3>
            <p id="quote" class="text-sm md:text-lg italic"></p>
          </div>
        </div>
      </div>
    </section>

    <!-- Manage Users Section -->
    <section id="manageUsers" class="hidden space-y-6">

      <!-- Teachers -->
      <div class="bg-white/90 p-4 md:p-6 rounded-2xl shadow text-gray-800">
        <h2 class="text-xl md:text-2xl font-semibold">ğŸ‘©â€ğŸ« Teachers</h2>
        <table id="teachersTable" class="min-w-full text-sm md:text-base mt-2 border-collapse">
          <thead>
            <tr class="text-left text-xs md:text-sm bg-blue-100">
              <th class="px-2 py-2 border">Name</th>
              <th class="px-2 py-2 border hidden sm:table-cell">Email</th>
              <th class="px-2 py-2 border">Phone</th>
              <th class="px-2 py-2 border">Levels</th>
              <th class="px-2 py-2 border">Status</th>
              <th class="px-2 py-2 border">Actions</th>
            </tr>
          </thead>
          <tbody id="teachersBody"></tbody>
        </table>
        <p id="noTeachersMsg" class="text-center text-gray-500 mt-3 hidden">No teachers found</p>
      </div>

      <!-- Students -->
      <div class="bg-white/90 p-4 md:p-6 rounded-2xl shadow text-gray-800">
        <h2 class="text-xl md:text-2xl font-semibold">ğŸ‘¨â€ğŸ“ Students</h2>
        <table id="studentsTable" class="min-w-full text-sm md:text-base mt-2 border-collapse">
          <thead>
            <tr class="text-left text-xs md:text-sm bg-blue-100">
              <th class="px-2 py-2 border">Name</th>
              <th class="px-2 py-2 border hidden sm:table-cell">Email</th>
              <th class="px-2 py-2 border">Level</th>
              <th class="px-2 py-2 border">Status</th>
              <th class="px-2 py-2 border">Actions</th>
            </tr>
          </thead>
          <tbody id="studentsBody"></tbody>
        </table>
        <p id="noStudentsMsg" class="text-center text-gray-500 mt-3 hidden">No students found</p>
      </div>

    </section>

  </main>
</div>

<script>
// Sidebar & Mobile Menu
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');
const mobileMenuBtn = document.getElementById('mobileMenuBtn');
const mobileCloseBtn = document.getElementById('mobileCloseBtn');

mobileMenuBtn?.addEventListener('click', () => { sidebar.style.transform='translateX(0)'; overlay.classList.remove('hidden'); document.body.style.overflow='hidden'; });
mobileCloseBtn?.addEventListener('click', () => { sidebar.style.transform='translateX(-110%)'; overlay.classList.add('hidden'); document.body.style.overflow=''; });
overlay?.addEventListener('click', () => { sidebar.style.transform='translateX(-110%)'; overlay.classList.add('hidden'); document.body.style.overflow=''; });
document.getElementById('mobileManageUsersBtn')?.addEventListener('click', () => { showSection('manageUsers'); });

function showSection(section) {
  document.querySelectorAll('main section').forEach(sec => sec.classList.add('hidden'));
  document.getElementById(section)?.classList.remove('hidden');
  if(window.innerWidth<768){sidebar.style.transform='translateX(-110%)'; overlay.classList.add('hidden'); document.body.style.overflow='';}
}

// Logout
function logout() {
  try { localStorage.removeItem('userRole'); localStorage.removeItem('userEmail'); } catch(e) {}
  window.location.href = '../login.html';
}

// Quotes
const quotes = [
  "Education is the most powerful weapon you can use to change the world. â€“ Nelson Mandela",
  "Leadership is influence, nothing more, nothing less. â€“ John Maxwell",
  "A good teacher inspires hope and love for learning. â€“ Brad Henry",
  "The future belongs to those who believe in the beauty of their dreams. â€“ Eleanor Roosevelt",
  "Success is not the key to happiness. Happiness is the key to success."
];
document.getElementById('quote').innerText = quotes[Math.floor(Math.random()*quotes.length)];

// Load teachers
function loadTeachers() {
  const teachers = JSON.parse(localStorage.getItem('teachers') || '[]');
  const tbody = document.getElementById('teachersBody');
  tbody.innerHTML='';
  const noMsg = document.getElementById('noTeachersMsg');

  if(!teachers.length){ noMsg.classList.remove('hidden'); return; }
  noMsg.classList.add('hidden');

  teachers.forEach((t, idx)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`
      <td class="px-2 py-2">${t.name}</td>
      <td class="px-2 py-2 hidden sm:table-cell">${t.email || ''}</td>
      <td class="px-2 py-2">${t.phone || ''}</td>
      <td class="px-2 py-2">${t.teachingLevels?.join(', ') || ''}</td>
      <td class="px-2 py-2">
        <span class="status-${t.status || 'active'}">${t.status || 'active'}</span>
      </td>
      <td class="px-2 py-2 space-x-1">
        <button class="bg-green-600 text-white px-2 py-1 rounded text-xs" onclick="editTeacher(${idx})">Edit</button>
        <button class="bg-yellow-500 text-white px-2 py-1 rounded text-xs" onclick="toggleTeacherStatus(${idx})">Toggle Status</button>
        <button class="bg-blue-700 text-white px-2 py-1 rounded text-xs" onclick="goTeacherDashboard('${t.email}')">Dashboard</button>
        <button class="bg-red-600 text-white px-2 py-1 rounded text-xs" onclick="deleteTeacher(${idx})">Delete</button>
      </td>
    `;
    tbody.appendChild(tr);
  });
}

// Load students
function loadStudents() {
  const students = JSON.parse(localStorage.getItem('students') || '[]');
  const tbody = document.getElementById('studentsBody');
  tbody.innerHTML='';
  const noMsg = document.getElementById('noStudentsMsg');
  if(!students.length){ noMsg.classList.remove('hidden'); return; }
  noMsg.classList.add('hidden');

  students.forEach((s, idx)=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`
      <td class="px-2 py-2">${s.name}</td>
      <td class="px-2 py-2 hidden sm:table-cell">${s.email || ''}</td>
      <td class="px-2 py-2">${s.level || ''}</td>
      <td class="px-2 py-2">
        <span class="status-${s.status || 'active'}">${s.status || 'active'}</span>
      </td>
      <td class="px-2 py-2 space-x-1">
        <button class="bg-green-600 text-white px-2 py-1 rounded text-xs" onclick="editStudent(${idx})">Edit</button>
        <button class="bg-yellow-500 text-white px-2 py-1 rounded text-xs" onclick="toggleStudentStatus(${idx})">Toggle Status</button>
        <button class="bg-blue-700 text-white px-2 py-1 rounded text-xs" onclick="goStudentDashboard('${s.level}')">Dashboard</button>
        <button class="bg-red-600 text-white px-2 py-1 rounded text-xs" onclick="deleteStudent(${idx})">Delete</button>
      </td>
    `;
    tbody.appendChild(tr);
  });
}

// Toggle statuses
function toggleTeacherStatus(idx){
  const teachers=JSON.parse(localStorage.getItem('teachers')||'[]');
  if(!teachers[idx].status || teachers[idx].status==='active'){teachers[idx].status='blocked';}
  else{teachers[idx].status='active';}
  localStorage.setItem('teachers',JSON.stringify(teachers));
  loadTeachers();
}

function toggleStudentStatus(idx){
  const students=JSON.parse(localStorage.getItem('students')||'[]');
  if(!students[idx].status || students[idx].status==='active'){students[idx].status='blocked';}
  else{students[idx].status='active';}
  localStorage.setItem('students',JSON.stringify(students));
  loadStudents();
}

// Dashboards
function goTeacherDashboard(email){
  localStorage.setItem('userRole','admin');
  if(email) localStorage.setItem('userEmail',email);
  window.location.href='../teachers/dashboard.html';
}

// Redirect to vertical-level selection page for students
function goStudentLevelsPage(){
  localStorage.setItem('userRole','admin');
  window.location.href='students-levels.html';
}

// Placeholder for edit/delete
function editTeacher(idx){ alert('Edit teacher: '+idx); }
function deleteTeacher(idx){ 
  const teachers=JSON.parse(localStorage.getItem('teachers')||'[]');
  if(confirm('Delete this teacher?')){teachers.splice(idx,1);localStorage.setItem('teachers',JSON.stringify(teachers));loadTeachers();}
}
function editStudent(idx){ alert('Edit student: '+idx); }
function deleteStudent(idx){
  const students=JSON.parse(localStorage.getItem('students')||'[]');
  if(confirm('Delete this student?')){students.splice(idx,1);localStorage.setItem('students',JSON.stringify(students));loadStudents();}
}

// Initialize
window.onload=function(){
  if(window.innerWidth<768){sidebar.style.transform='translateX(-110%)';}
  showSection('welcome');
  loadTeachers();
  loadStudents();
};
</script>
</body>
</html>
