<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Admin Dashboard – Cuambe English School</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { font-family: 'Inter', sans-serif; }
  /* small visual tweak for mobile table rows */
  tr.mobile-row { display: table-row; }
  /* subtle shadow for cards on mobile */
  .card-shadow { box-shadow: 0 6px 18px rgba(2,6,23,0.12); }
</style>
</head>
<body class="min-h-screen bg-gradient-to-r from-red-500 via-yellow-400 via-green-400 via-blue-500 via-indigo-500 via-purple-600 to-pink-500">

<!-- Top bar (visible on small screens) -->
<header class="md:hidden bg-blue-900 text-white flex items-center justify-between px-4 py-3">
  <div class="flex items-center gap-3">
    <button id="mobileMenuBtn" aria-label="Open menu" class="p-2 bg-blue-800/60 rounded-lg">
      ☰
    </button>
    <h1 class="text-lg font-bold">Admin Dashboard</h1>
  </div>
  <div class="flex items-center gap-2">
    <button id="mobileTeachersBtn" class="px-3 py-1 rounded-md bg-green-600 text-white text-sm">Teachers</button>
    <button id="mobileStudentsBtn" class="px-3 py-1 rounded-md bg-purple-600 text-white text-sm">Students</button>
  </div>
</header>

<div class="min-h-screen md:flex">

  <!-- Sidebar -->
  <aside id="sidebar" class="fixed md:relative z-40 left-0 top-0 md:top-auto md:left-auto w-full md:w-72 transform md:translate-x-0 transition-transform duration-200 bg-gradient-to-b from-blue-900 to-blue-700 text-white p-4 md:h-auto">
    <div class="flex items-center justify-between md:block">
      <h1 class="text-2xl font-bold text-center md:mb-6">Admin Dashboard</h1>
      <!-- close on mobile -->
      <button id="mobileCloseBtn" class="md:hidden p-2 bg-blue-800/60 rounded-lg">✕</button>
    </div>

    <nav class="mt-3 md:mt-6 space-y-3">
      <button onclick="showSection('welcome')" class="w-full text-left px-4 py-3 rounded-xl bg-blue-800 hover:bg-blue-600 font-semibold flex items-center gap-2 justify-between">
        <span>🏠 Welcome</span>
      </button>

      <button onclick="showSection('teachers')" class="w-full text-left px-4 py-3 rounded-xl bg-blue-800 hover:bg-blue-600 font-semibold flex items-center gap-2 justify-between">
        <span>👩‍🏫 Teachers</span>
      </button>

      <button onclick="showSection('students')" class="w-full text-left px-4 py-3 rounded-xl bg-blue-800 hover:bg-blue-600 font-semibold flex items-center gap-2 justify-between">
        <span>👨‍🎓 Students</span>
      </button>

      <button onclick="showSection('settings')" class="w-full text-left px-4 py-3 rounded-xl bg-blue-800 hover:bg-blue-600 font-semibold flex items-center gap-2 justify-between">
        <span>⚙️ Settings</span>
      </button>

      <!-- Quick Access -->
      <div class="mt-4 space-y-3">
        <button id="openTeachers" class="w-full px-4 py-3 rounded-xl bg-green-600 hover:bg-green-500 font-semibold flex items-center gap-2 justify-center">
          👩‍🏫 Open Teachers Dashboard
        </button>

        <button id="openStudents" class="w-full px-4 py-3 rounded-xl bg-purple-600 hover:bg-purple-500 font-semibold flex items-center gap-2 justify-center">
          👨‍🎓 Open Students Dashboard
        </button>
      </div>

      <div class="mt-6">
        <button onclick="logout()" class="w-full px-4 py-3 rounded-xl bg-red-600 hover:bg-red-700 font-bold flex items-center gap-2 justify-center">
          🚪 Logout
        </button>
      </div>
    </nav>
  </aside>

  <!-- Overlay for mobile when sidebar open -->
  <div id="overlay" class="hidden fixed inset-0 bg-black/30 z-30 md:hidden"></div>

  <!-- Main content -->
  <main class="md:ml-72 p-4 md:p-8 space-y-6">

    <!-- Welcome Section -->
    <section id="welcome" class="space-y-4">
      <h2 class="text-2xl md:text-3xl font-bold text-white">🌟 Welcome, Administrator!</h2>
      <div class="bg-white/95 p-6 md:p-8 rounded-2xl card-shadow text-gray-800 space-y-4 md:space-y-6 max-w-4xl mx-auto text-justify leading-relaxed">
        <p class="text-sm md:text-base">
          Welcome to the <strong>Cuambe English School Administration Panel</strong>, where leadership meets purpose and organization inspires growth. This is your control center to empower teachers, support students, and strengthen our entire learning community.
        </p>

        <p class="text-sm md:text-base">Every decision you make here contributes to a brighter academic journey. By managing teachers, guiding students, and maintaining excellence, you are not just leading, you are shaping the foundation of success for every learner at Cuambe English School.</p>

        <p class="text-sm md:text-base">As the administrator, you hold the torch that lights the path of progress. Your insight ensures that the school remains a place where teaching thrives and every student discovers their voice, confidence, and love for English.</p>

        <p class="italic text-gray-700 border-l-4 border-blue-600 pl-4 text-sm md:text-base">
          💡 <strong>Tip:</strong> Lead with heart and vision. When you guide a teacher, update a record, or support a student, remember, you’re building a legacy of learning that lasts far beyond the classroom.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mt-2">
          <div class="p-4 rounded-2xl text-white bg-gradient-to-br from-yellow-400 to-orange-500">
            <h3 class="text-md md:text-xl font-bold mb-1">🏆 Admin of the Month</h3>
            <p class="font-semibold text-sm md:text-lg">Felisberto Raimundo Cuambe</p>
            <p class="text-xs md:text-sm opacity-90 mt-2">Recognized for outstanding leadership, dedication, and commitment to excellence at Cuambe English School.</p>
          </div>

          <div class="p-4 rounded-2xl text-white bg-gradient-to-br from-blue-600 to-indigo-700">
            <h3 class="text-md md:text-xl font-bold mb-1">💬 Motivational Quote</h3>
            <p id="quote" class="text-sm md:text-lg italic"></p>
          </div>
        </div>
      </div>
    </section>

    <!-- Teachers Section -->
    <section id="teachers" class="hidden space-y-4">
      <h2 class="text-xl md:text-2xl font-semibold text-white">👩‍🏫 Manage Teachers</h2>
      <div class="bg-white/90 p-3 md:p-6 rounded-2xl shadow text-gray-800 overflow-x-auto">
        <table id="teachersTable" class="min-w-full text-sm md:text-base">
          <thead>
            <tr class="text-left text-xs md:text-sm">
              <th class="px-2 py-2">Name</th>
              <th class="px-2 py-2 hidden sm:table-cell">Email</th>
              <th class="px-2 py-2">Level</th>
              <th class="px-2 py-2 hidden md:table-cell">ID</th>
              <th class="px-2 py-2">Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <p id="noTeachersMsg" class="text-center text-gray-500 mt-3 hidden">No teachers found</p>
      </div>
    </section>

    <!-- Students Section -->
    <section id="students" class="hidden space-y-4">
      <h2 class="text-xl md:text-2xl font-semibold text-white">👨‍🎓 Manage Students</h2>
      <div class="bg-white/90 p-3 md:p-6 rounded-2xl shadow text-gray-800 overflow-x-auto">
        <table id="studentsTable" class="min-w-full text-sm md:text-base">
          <thead>
            <tr class="text-left text-xs md:text-sm">
              <th class="px-2 py-2">Name</th>
              <th class="px-2 py-2 hidden sm:table-cell">Email</th>
              <th class="px-2 py-2">Level</th>
              <th class="px-2 py-2">Actions</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <p id="noStudentsMsg" class="text-center text-gray-500 mt-3 hidden">No students found</p>
      </div>
    </section>

    <!-- Settings Section -->
    <section id="settings" class="hidden space-y-4">
      <h2 class="text-xl md:text-2xl font-semibold text-white">⚙️ Admin Settings</h2>
      <div class="bg-white/90 p-4 md:p-6 rounded-2xl shadow text-gray-800 space-y-3 md:space-y-4">
        <div>
          <label class="block font-semibold text-gray-700 text-sm md:text-base">Current Email</label>
          <input type="email" id="currentEmail" class="w-full border rounded px-3 py-2 text-sm md:text-base">
        </div>
        <div>
          <label class="block font-semibold text-gray-700 text-sm md:text-base">Current Password</label>
          <input type="password" id="currentPassword" class="w-full border rounded px-3 py-2 text-sm md:text-base">
        </div>
        <div>
          <label class="block font-semibold text-gray-700 text-sm md:text-base">New Password</label>
          <input type="password" id="newPassword" class="w-full border rounded px-3 py-2 text-sm md:text-base">
        </div>
        <div>
          <label class="block font-semibold text-gray-700 text-sm md:text-base">Confirm New Password</label>
          <input type="password" id="confirmPassword" class="w-full border rounded px-3 py-2 text-sm md:text-base">
        </div>
        <button onclick="saveAdminSettings()" class="w-full bg-blue-700 hover:bg-blue-600 text-white font-semibold px-6 py-2 rounded-xl mt-2">Save Changes</button>
      </div>
    </section>

  </main>
</div>

<script>
/* ---------------- Responsive sidebar toggle ---------------- */
const sidebar = document.getElementById('sidebar');
const overlay = document.getElementById('overlay');
const mobileMenuBtn = document.getElementById('mobileMenuBtn');
const mobileCloseBtn = document.getElementById('mobileCloseBtn');

function openMobileMenu() {
  sidebar.classList.remove('-translate-x-full');
  sidebar.classList.add('translate-x-0');
  sidebar.style.transform = 'translateX(0)';
  overlay.classList.remove('hidden');
  document.body.style.overflow = 'hidden';
}
function closeMobileMenu() {
  // move sidebar off-screen on mobile
  sidebar.style.transform = 'translateX(-110%)';
  overlay.classList.add('hidden');
  document.body.style.overflow = '';
}
mobileMenuBtn?.addEventListener('click', openMobileMenu);
mobileCloseBtn?.addEventListener('click', closeMobileMenu);
overlay?.addEventListener('click', closeMobileMenu);

/* mobile quick buttons */
document.getElementById('mobileTeachersBtn')?.addEventListener('click', () => { closeMobileMenu(); showSection('teachers'); });
document.getElementById('mobileStudentsBtn')?.addEventListener('click', () => { closeMobileMenu(); showSection('students'); });

/* ---------------- Navigation ---------------- */
function showSection(section) {
  document.querySelectorAll('main section').forEach(sec => sec.classList.add('hidden'));
  const el = document.getElementById(section);
  if (el) el.classList.remove('hidden');
  // close menu on small screens when navigating
  if (window.innerWidth < 768) closeMobileMenu();
}

/* ---------------- Logout ---------------- */
function logout() {
  // admin file sits in /admin/, so go up one level
  window.location.href = '../login.html';
}

/* ---------------- Load Teachers ---------------- */
function loadTeachers() {
  const teachers = JSON.parse(localStorage.getItem('teachers') || '[]');
  const tbody = document.querySelector('#teachersTable tbody');
  tbody.innerHTML = '';
  const noMsg = document.getElementById('noTeachersMsg');

  if (!teachers || teachers.length === 0) {
    noMsg.classList.remove('hidden');
    return;
  } else {
    noMsg.classList.add('hidden');
  }

  teachers.forEach((t, idx) => {
    const tr = document.createElement('tr');
    tr.className = 'align-top';
    tr.innerHTML = `
      <td class="px-2 py-2">${t.name}</td>
      <td class="px-2 py-2 hidden sm:table-cell">${t.email || ''}</td>
      <td class="px-2 py-2">${t.level || ''}</td>
      <td class="px-2 py-2 hidden md:table-cell">${t.id || ''}</td>
      <td class="px-2 py-2">
        <div class="flex flex-col sm:flex-row sm:items-center sm:gap-2 gap-2">
          <button onclick="editTeacher(${idx})" class="w-full sm:w-auto bg-yellow-500 text-white px-2 py-1 rounded text-xs">Edit</button>
          <button onclick="deleteTeacher(${idx})" class="w-full sm:w-auto bg-red-600 text-white px-2 py-1 rounded text-xs">Delete</button>
          <button onclick="goTeacherDashboard('${t.email}')" class="w-full sm:w-auto bg-blue-700 text-white px-2 py-1 rounded text-xs">Dashboard</button>
        </div>
      </td>`;
    tbody.appendChild(tr);
  });
}

/* ---------------- Load Students ---------------- */
function loadStudents() {
  const students = JSON.parse(localStorage.getItem('students') || '[]');
  const tbody = document.querySelector('#studentsTable tbody');
  tbody.innerHTML = '';
  const noMsg = document.getElementById('noStudentsMsg');

  if (!students || students.length === 0) {
    noMsg.classList.remove('hidden');
    return;
  } else {
    noMsg.classList.add('hidden');
  }

  students.forEach((s, idx) => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td class="px-2 py-2">${s.name}</td>
      <td class="px-2 py-2 hidden sm:table-cell">${s.email || ''}</td>
      <td class="px-2 py-2">${s.level || ''}</td>
      <td class="px-2 py-2">
        <div class="flex flex-col sm:flex-row sm:items-center sm:gap-2 gap-2">
          <button onclick="editStudent(${idx})" class="w-full sm:w-auto bg-yellow-500 text-white px-2 py-1 rounded text-xs">Edit</button>
          <button onclick="deleteStudent(${idx})" class="w-full sm:w-auto bg-red-600 text-white px-2 py-1 rounded text-xs">Delete</button>
          <button onclick="goStudentDashboard('${s.email}')" class="w-full sm:w-auto bg-blue-700 text-white px-2 py-1 rounded text-xs">Dashboard</button>
        </div>
      </td>`;
    tbody.appendChild(tr);
  });
}

/* ---------------- Quotes ---------------- */
const quotes = [
  "Education is the most powerful weapon you can use to change the world. – Nelson Mandela",
  "Leadership is influence, nothing more, nothing less. – John Maxwell",
  "A good teacher inspires hope and love for learning. – Brad Henry",
  "The future belongs to those who believe in the beauty of their dreams. – Eleanor Roosevelt",
  "Success is not the key to happiness. Happiness is the key to success."
];
document.getElementById('quote').innerText = quotes[Math.floor(Math.random() * quotes.length)];

/* ---------------- Dashboard Navigation (paths kept correct for /admin/) ---------------- */
function goTeacherDashboard(email) {
  window.location.href = '../teachers/dashboard.html';
}
function goStudentDashboard(email) {
  window.location.href = '../students/dashboard.html';
}

/* ---------------- Quick Access Buttons (already have IDs in markup) ---------------- */
document.getElementById('openTeachers').onclick = () => window.location.href = '../teachers/dashboard.html';
document.getElementById('openStudents').onclick = () => window.location.href = '../students/dashboard.html';

/* ---------------- Placeholder functions for edit/delete (if you have them elsewhere) ---------------- */
function editTeacher(idx) {
  // implement or call your existing edit logic
  console.log('editTeacher', idx);
}
function deleteTeacher(idx) {
  const teachers = JSON.parse(localStorage.getItem('teachers') || '[]');
  teachers.splice(idx, 1);
  localStorage.setItem('teachers', JSON.stringify(teachers));
  loadTeachers();
}
function editStudent(idx) {
  console.log('editStudent', idx);
}
function deleteStudent(idx) {
  const students = JSON.parse(localStorage.getItem('students') || '[]');
  students.splice(idx, 1);
  localStorage.setItem('students', JSON.stringify(students));
  loadStudents();
}

/* ---------------- Initialize ---------------- */
window.onload = function() {
  // ensure sidebar hidden on mobile initially
  if (window.innerWidth < 768) {
    sidebar.style.transform = 'translateX(-110%)';
  }
  showSection('welcome');
  loadTeachers();
  loadStudents();
};
</script>
</body>
</html>
